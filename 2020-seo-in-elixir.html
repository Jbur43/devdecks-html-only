<!DOCTYPE html>
<html lang="en">
  <head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2976969447542443"
     crossorigin="anonymous"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-2F7W0VSKYS"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-2F7W0VSKYS');
    </script>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta charset="UTF-8" content="OBQEQTwbCEwBP1RBDn88KzoRW3wdVDRNYgp7sAE82wauzGchWI28e6cx" csrf-param="_csrf_token" method-param="_method" name="csrf-token">
<meta content="seo, cms, elixir, phoenix" name="keywords"><meta content="Learn how to make SEO more dynamic in a Phoenix App" name="description">
<title>On-page SEO meta-tags and page-title for Phoenix applications</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100;200;300;400;500;600&amp;display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100;200;300;400;500;600&amp;display=swap" rel="stylesheet">
    <link phx-track-static rel="stylesheet" href="css/app-02e14b945d8b05cb2897c7e476f6f184%EF%B9%96vsn=d.css"/>
    <script defer phx-track-static type="text/javascript" src="js/app-a031d7efdf9d092a14f7e85a21871ce8%EF%B9%96vsn=d.js"></script>
    <!-- SIDENAV SCRIPT -->
    <script type="text/javascript">
      /* Set the width of the side navigation to 250px */
      function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
        document.getElementById("main").style.marginLeft = "250px";
        document.body.style.backgroundColor = "rgba(0,0,0,0.4)";

        var dropdown = document.getElementsByClassName("dropdown-btn");
        var i;
        for (i = 0; i < dropdown.length; i++) {
          dropdown[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var dropdownContent = this.nextElementSibling;
            if (dropdownContent.style.display === "block") {
              dropdownContent.style.display = "none";
            } else {
              dropdownContent.style.display = "block";
            }
          });
        }
      }

      /* Set the width of the side navigation to 0 */
      function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
        document.getElementById("main").style.marginLeft = "0";
        document.body.style.backgroundColor = "white";
      }
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2976969447542443"
     crossorigin="anonymous"></script>
    <ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-2976969447542443"
     data-ad-slot="2745114693">
    </ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </head>
  <body>

    <div id="mySidenav" class="sidenav">
      <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
      <!-- FOR WHEN YOU NEED NESTED NAV USE THIS EXAMPLE -->
      <!-- <p class="dropdown-btn">Elixir Phoenix</p>
      <div class="dropdown-container">
        <a href="#">Link 1</a>
        <a href="#">Link 2</a>
      </div> -->
      <a href="page/about.html">About</a>
      <a href="page/attributions.html">Attributions</a>
    </div>

    <nav id="nav">
      <a href="index.html"><img id="logo" class="logo" src="images/logo-7c9e547c805c708decc674b648163720%EF%B9%96vsn=d.svg" alt="DevDecks icon" /></a>
      <a href="studio.html"><img id="settings-icon" class="nav-icon lg" src="images/studio-2-00b6814e1495c4cb9ff6987d9b98753f%EF%B9%96vsn=d.svg" alt="studio icon" /></a>
      <a id="darkmode-toggler"><img id="settings-icon" class="nav-icon" src="images/night-mode-41cf0bc8abaacbbd59e2fdca8ac55a85%EF%B9%96vsn=d.svg" alt="dark mode icon" /></a>
      <img id="settings-icon" onclick="openNav()" class="nav-icon" src="images/more-79c5db1b1206b6b8195fee1ceb385178%EF%B9%96vsn=d.svg" alt="more pages icon" />
    </nav>
    <br />
<main role="main" class="container">
  <p class="alert alert-info" role="alert"></p>
  <p class="alert alert-danger" role="alert"></p>
<div class="page blog-post">
  <div id="2020-seo-in-elixir" style="margin-bottom: 3rem;">
<a class="all-posts-link" href="index.html">All posts</a>
    <div class="flex-row-d-column-m">
      <h1 class="link-title">On-page SEO meta-tags and page-title for Phoenix applications</h1>
      <time>2020-12-11</time>
    </div>

    <div class="flex-row-no-space">
      <img class="icon-sm" src="images/tag2-730d3eac769a667d071582853b151791%EF%B9%96vsn=d.svg" />&nbsp<a class="blog-tag" href="tags/seo.html">seo</a><a class="blog-tag" href="tags/cms.html">cms</a><a class="blog-tag" href="tags/elixir.html">elixir</a><a class="blog-tag" href="tags/phoenix.html">phoenix</a>
    </div>

    <div class="blog-post-body">
<p>
*This post assumes you are using server generated HTML templates in your Elixir application.</p>
<p>
Two important elements of on-page SEO are the title and meta tags used on your each of your pages. This data describes what the content on your page pertains to and allows a search engine to more accurately index your website. This post shows you how to dynamically add these tags to your application.</p>
<p>
Add this data to pages you want Google to be aware of. For DevDecks as of Dec 2020 those are Posts and Decks. In your layout view add <code class="inline">meta_tags</code> and <code class="inline">meta_tag</code> methods that will iterate over a list of meta_tags and will output the content for each tag.</p>
<pre><code class="makeup elixir"><span class="n">layout_view</span><span class="o">.</span><span class="n">ex</span><span class="w">

</span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">DevDecksWeb.LayoutView</span><span class="w"> </span><span class="k" data-group-id="5200300552-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">DevDecksWeb</span><span class="p">,</span><span class="w"> </span><span class="ss">:view</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">meta_tags</span><span class="p" data-group-id="5200300552-2">(</span><span class="n">attrs_list</span><span class="p" data-group-id="5200300552-2">)</span><span class="w"> </span><span class="k" data-group-id="5200300552-3">do</span><span class="w">
    </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p" data-group-id="5200300552-4">(</span><span class="n">attrs_list</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">meta_tag</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="5200300552-4">)</span><span class="w">
  </span><span class="k" data-group-id="5200300552-3">end</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">meta_tag</span><span class="p" data-group-id="5200300552-5">(</span><span class="n">attrs</span><span class="p" data-group-id="5200300552-5">)</span><span class="w"> </span><span class="k" data-group-id="5200300552-6">do</span><span class="w">
    </span><span class="n">tag</span><span class="p" data-group-id="5200300552-7">(</span><span class="ss">:meta</span><span class="p">,</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">into</span><span class="p" data-group-id="5200300552-8">(</span><span class="n">attrs</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5200300552-9">[</span><span class="p" data-group-id="5200300552-9">]</span><span class="p" data-group-id="5200300552-8">)</span><span class="p" data-group-id="5200300552-7">)</span><span class="w">
  </span><span class="k" data-group-id="5200300552-6">end</span><span class="w">
</span><span class="k" data-group-id="5200300552-1">end</span></code></pre>
<p>
In the root layout file (<code class="inline">root.html.leex</code>) call the meta_tags function if meta_tags are provided to assigns. Call <code class="inline">assigns[:meta_attrs]</code> directly here instead of <code class="inline">@meta_attrs</code> so that if <code class="inline">@meta_attrs</code> is not provided the application does not error and stop execution. Also check for a page_title the same way right below or display a default title:</p>
<pre><code class="makeup elixir"><span class="o">&lt;</span><span class="p">%</span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">assigns</span><span class="p" data-group-id="4806220019-1">[</span><span class="ss">:meta_attrs</span><span class="p" data-group-id="4806220019-1">]</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">meta_tags</span><span class="p" data-group-id="4806220019-2">(</span><span class="n">assigns</span><span class="p" data-group-id="4806220019-3">[</span><span class="ss">:meta_attrs</span><span class="p" data-group-id="4806220019-3">]</span><span class="p" data-group-id="4806220019-2">)</span><span class="w"> </span><span class="p">%</span><span class="o">&gt;</span><span class="w">
</span><span class="o">&lt;</span><span class="p">%</span><span class="o">=</span><span class="w"> </span><span class="n">live_title_tag</span><span class="w"> </span><span class="n">assigns</span><span class="p" data-group-id="4806220019-4">[</span><span class="ss">:page_title</span><span class="p" data-group-id="4806220019-4">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s">&quot;DevDecks · Software Development Flashcards&quot;</span><span class="w"> </span><span class="p">%</span><span class="o">&gt;</span></code></pre>
<p>
And then if the template is generated from LiveView add page_title and meta_tags to assigns in mount like so:</p>
<pre><code class="makeup elixir"><span class="kd">def</span><span class="w"> </span><span class="nf">mount</span><span class="p" data-group-id="5436070225-1">(</span><span class="c">_params</span><span class="p">,</span><span class="w"> </span><span class="c">_session</span><span class="p">,</span><span class="w"> </span><span class="n">socket</span><span class="p" data-group-id="5436070225-1">)</span><span class="w"> </span><span class="k" data-group-id="5436070225-2">do</span><span class="w">
  </span><span class="n">meta_attrs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="5436070225-3">[</span><span class="w">
    </span><span class="p" data-group-id="5436070225-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;keywords&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">content</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;tech study flashcards, full list study cards&quot;</span><span class="p" data-group-id="5436070225-4">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="5436070225-5">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;description&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">content</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Software Development Study Flashcards&quot;</span><span class="p" data-group-id="5436070225-5">}</span><span class="w">
  </span><span class="p" data-group-id="5436070225-3">]</span><span class="w">

  </span><span class="p" data-group-id="5436070225-6">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">assign</span><span class="p" data-group-id="5436070225-7">(</span><span class="n">socket</span><span class="p">,</span><span class="w"> </span><span class="ss">meta_attrs</span><span class="p">:</span><span class="w"> </span><span class="n">meta_attrs</span><span class="p">,</span><span class="w"> </span><span class="ss">page_title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;DevDecks · Software Development Study Flashcards&quot;</span><span class="p" data-group-id="5436070225-7">)</span><span class="p" data-group-id="5436070225-6">}</span><span class="w">
</span><span class="k" data-group-id="5436070225-2">end</span></code></pre>
<p>
And if you’re using an MVC approach add it to your controller that is generating the template:</p>
<pre><code class="makeup elixir"><span class="kd">def</span><span class="w"> </span><span class="nf">index</span><span class="p" data-group-id="5937534723-1">(</span><span class="n">conn</span><span class="p">,</span><span class="w"> </span><span class="c">_params</span><span class="p" data-group-id="5937534723-1">)</span><span class="w"> </span><span class="k" data-group-id="5937534723-2">do</span><span class="w">
  </span><span class="n">meta_attrs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="5937534723-3">[</span><span class="w">
    </span><span class="p" data-group-id="5937534723-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;keywords&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">content</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;tech blog, tech writing&quot;</span><span class="p" data-group-id="5937534723-4">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="5937534723-5">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;description&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">content</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;A tech blog by DevDecks&quot;</span><span class="p" data-group-id="5937534723-5">}</span><span class="w">
  </span><span class="p" data-group-id="5937534723-3">]</span><span class="w">

  </span><span class="n">render</span><span class="p" data-group-id="5937534723-6">(</span><span class="n">conn</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;index.html&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">meta_attrs</span><span class="p">:</span><span class="w"> </span><span class="n">meta_attrs</span><span class="p">,</span><span class="w"> </span><span class="ss">page_title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;DevDecks · The tech blog by DevDecks&quot;</span><span class="p" data-group-id="5937534723-6">)</span><span class="w">
</span><span class="k" data-group-id="5937534723-2">end</span></code></pre>
<p>
One more thing to note is that when you are adding these tags you want to keep them in the <code class="inline">&lt;head&gt;</code> of the HTML doc because if they are in the body some technologies won’t notice them, for example social media OpenGraph tags won’t be read if they are not in the head of the document.</p>
<br />
<p>
Resources I found useful when building this:</p>
<ul>
  <li>
<a href="https://elixirforum.com/t/how-to-create-dynamic-meta-tag-in-phoenix/15286">https://elixirforum.com/t/how-to-create-dynamic-meta-tag-in-phoenix/15286</a>  </li>
  <li>
<a href="https://stackoverflow.com/questions/1447842/what-happens-if-the-meta-tags-are-present-in-the-document-body">https://stackoverflow.com/questions/1447842/what-happens-if-the-meta-tags-are-present-in-the-document-body</a>  </li>
</ul>

    </div>
  </div>
</div>

</main>

    <div id="privacy-policy-container">
      <a href="page/privacy.html">Privacy Policy</a>
      <div>Built with 🛠️ and ☕ in ⛰️</div>
    </div>

  </body>
</html>
