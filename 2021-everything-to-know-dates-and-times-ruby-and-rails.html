<!DOCTYPE html>
<html lang="en">
  <head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2976969447542443"
     crossorigin="anonymous"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-2F7W0VSKYS"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-2F7W0VSKYS');
    </script>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta charset="UTF-8" content="VgRjDGRKAhgNYzApKwJ-UA5bSAk1Pjcp1cUuVxVSY5G_fiG6dl-yQkze" csrf-param="_csrf_token" method-param="_method" name="csrf-token">
<meta content="ruby, rails" name="keywords"><meta content="Everything you may have wanted to know about Dates and Times in Ruby and Rails" name="description">
<title>Everything you may have wanted to know about Dates and Times in Ruby and Rails</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100;200;300;400;500;600&amp;display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100;200;300;400;500;600&amp;display=swap" rel="stylesheet">
    <link phx-track-static rel="stylesheet" href="css/app-02e14b945d8b05cb2897c7e476f6f184%EF%B9%96vsn=d.css"/>
    <script defer phx-track-static type="text/javascript" src="js/app-a031d7efdf9d092a14f7e85a21871ce8%EF%B9%96vsn=d.js"></script>
    <!-- SIDENAV SCRIPT -->
    <script type="text/javascript">
      /* Set the width of the side navigation to 250px */
      function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
        document.getElementById("main").style.marginLeft = "250px";
        document.body.style.backgroundColor = "rgba(0,0,0,0.4)";

        var dropdown = document.getElementsByClassName("dropdown-btn");
        var i;
        for (i = 0; i < dropdown.length; i++) {
          dropdown[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var dropdownContent = this.nextElementSibling;
            if (dropdownContent.style.display === "block") {
              dropdownContent.style.display = "none";
            } else {
              dropdownContent.style.display = "block";
            }
          });
        }
      }

      /* Set the width of the side navigation to 0 */
      function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
        document.getElementById("main").style.marginLeft = "0";
        document.body.style.backgroundColor = "white";
      }
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2976969447542443"
     crossorigin="anonymous"></script>
    <ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-2976969447542443"
     data-ad-slot="2745114693">
    </ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </head>
  <body>

    <div id="mySidenav" class="sidenav">
      <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
      <!-- FOR WHEN YOU NEED NESTED NAV USE THIS EXAMPLE -->
      <!-- <p class="dropdown-btn">Elixir Phoenix</p>
      <div class="dropdown-container">
        <a href="#">Link 1</a>
        <a href="#">Link 2</a>
      </div> -->
      <a href="page/about.html">About</a>
      <a href="page/attributions.html">Attributions</a>
    </div>

    <nav id="nav">
      <a href="index.html"><img id="logo" class="logo" src="images/logo-7c9e547c805c708decc674b648163720%EF%B9%96vsn=d.svg" alt="DevDecks icon" /></a>
      <a href="studio.html"><img id="settings-icon" class="nav-icon lg" src="images/studio-2-00b6814e1495c4cb9ff6987d9b98753f%EF%B9%96vsn=d.svg" alt="studio icon" /></a>
      <a id="darkmode-toggler"><img id="settings-icon" class="nav-icon" src="images/night-mode-41cf0bc8abaacbbd59e2fdca8ac55a85%EF%B9%96vsn=d.svg" alt="dark mode icon" /></a>
      <img id="settings-icon" onclick="openNav()" class="nav-icon" src="images/more-79c5db1b1206b6b8195fee1ceb385178%EF%B9%96vsn=d.svg" alt="more pages icon" />
    </nav>
    <br />
<main role="main" class="container">
  <p class="alert alert-info" role="alert"></p>
  <p class="alert alert-danger" role="alert"></p>
<div class="page blog-post">
  <div id="2021-everything-to-know-dates-and-times-ruby-and-rails" style="margin-bottom: 3rem;">
<a class="all-posts-link" href="index.html">All posts</a>
    <div class="flex-row-d-column-m">
      <h1 class="link-title">Everything you may have wanted to know about Dates and Times in Ruby and Rails</h1>
      <time>2021-09-02</time>
    </div>

    <div class="flex-row-no-space">
      <img class="icon-sm" src="images/tag2-730d3eac769a667d071582853b151791%EF%B9%96vsn=d.svg" />&nbsp<a class="blog-tag" href="tags/ruby.html">ruby</a><a class="blog-tag" href="tags/rails.html">rails</a>
    </div>

    <div class="blog-post-body">
<p>
I wrote this post as a reference to myself for when I need to work with Dates/Times on different projects. I hope you find it helpful.</p>
<p>
‚Ä¶</p>
<h3>
  How do you change the an applications time zone using Rails?</h3>
<p>
Update the <code class="inline">config/application.rb</code> value for <code class="inline">config.time_zone = &quot;American Samoa&quot;</code></p>
<h3>
  If you update an applications time zone, what conflicts might arise between the system time and the application time?</h3>
<p>
Unless you have your application deployed in the same region that you set the time zone for, they will be on different time zones. On the <code class="inline">DateTime</code> object there is a <code class="inline">#now</code> method that will return the date and time using the systems timezone and this can be easily thought to be the applications timezone. In this scenario you will want to use <code class="inline">DateTime.current</code> which reflects the applications timezone. If you do not update the timezone for your application this does not apply.</p>
<h3>
  Let's say you have a resource in your application which you would like to share with users, a report in this case. On the report you want to show the time the report was created in your users local time, how do you handle that?</h3>
<p>
There is no built in methodology to help with this. In your system you will have to capture the users time zone on the client and pass it to the server to be stored for future reference. <a href="https://thoughtbot.com/blog/its-about-time-zones" taget="_blank">Thoughtbot</a> wrote a good blog that illustrates a clean way of handling this.
This post from <a href="https://www.viget.com/articles/using-time-zones-with-rails/" target="_blank">Viget</a> also illustrates a few options for this.</p>
<h3>
  What format should be used when sending dates and times to API's?</h3>
<p>
<code class="inline">ISO8601</code>. This is the most widely supported standard in systems today. To convert a date/time object to this standard in Ruby:</p>
<pre><code>report.created_at.to_s(:iso8601)</code></pre>
<h3>
  How do time offsets work in regards to UTC and timezones?</h3>
<p>
Coordinated Universal Time aka UTC is the default ‚Äútimezone‚Äù in Rails but it is not a timezone, rather it is a universal standard for keeping time based on atomic time. UTC offsets then are an amount of time subtracted from or added to UTC time to specify the local time.</p>
<h3>
  In your Ruby codebase do you need to convert times/dates to a standard format to compare if two dates are the same?</h3>
<p>
No, that is handled for you:</p>
<pre><code>t1 = Time.parse(&#39;2017-07-13T17:13:12-04:00&#39;)
#=&gt; 2017-07-13 17:13:12 -0400

t2 = Time.parse(&#39;2017-07-13 21:13:12 UTC&#39;)
#=&gt; 2017-07-13 21:13:12 UTC

t1 == t2
#=&gt; true</code></pre>
<p>
<a href="https://stackoverflow.com/questions/45091068/how-to-compare-times-in-different-time-zones-in-ruby" taget="_blank">Source</a></p>
<h3>
  How do you query for the current time in UTC when using Rails vs non Rails</h3>
<p>
Rails: <code class="inline">DateTime.current.utc</code>
Non Rails Project: <code class="inline">Time.current.utc</code></p>
<h3>
  How to get the current timezone:</h3>
<pre><code>=&gt; Time.zone.name
&quot;Perth&quot;</code></pre>
<h3>
  When using Rails you can get all available time zones using the rake task:</h3>
<pre><code>rake time:zones:all</code></pre>
<h3>
  Rails records by default are saved in the UTC timezone.</h3>
<ol>
  <li>
Getting retrieving an ActiveRecord record from your DB and retrieving its timestamp:    <pre><code>User.first.created_at
=&gt; Thu, 24 Jun 2021 18:39:01 UTC +00:00</code></pre>
  </li>
</ol>
<p>
Note here the zone is indicated by <code class="inline">UTC +00:00</code></p>
<ol start="2">
  <li>
Check that against the output of <code class="inline">rake time:zones:all</code> and check that output for the previously mentioned <code class="inline">UTC +00:00</code>. You will find UTC in that timezone list.  </li>
</ol>
<pre><code>* UTC +00:00 *
Casablanca
Dublin
Edinburgh
Lisbon
London
Monrovia
UTC</code></pre>
<h3>
  How to check if an object is an instance of date or Timeor DateTime in Ruby?</h3>
<pre><code>if d.respond_to?(:strftime)
  # d is a Date or DateTime object
end</code></pre>

    </div>
  </div>
</div>

</main>

    <div id="privacy-policy-container">
      <a href="page/privacy.html">Privacy Policy</a>
      <div>Built with üõ†Ô∏è and ‚òï in ‚õ∞Ô∏è</div>
    </div>

  </body>
</html>
