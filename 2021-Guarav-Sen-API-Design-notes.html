<!DOCTYPE html>
<html lang="en">
  <head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2976969447542443"
     crossorigin="anonymous"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-2F7W0VSKYS"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-2F7W0VSKYS');
    </script>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta charset="UTF-8" content="Hj5KEiIQDBYqBz0nayU_GSx3LQAJDzMKqp0Cqq4wzTON-_rhcOHHJilr" csrf-param="_csrf_token" method-param="_method" name="csrf-token">
<meta content="system-design, api" name="keywords"><meta content="api design notes from Guarav Sen tutorial" name="description">
<title>Guarav Sen - API Design Notes</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100;200;300;400;500;600&amp;display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100;200;300;400;500;600&amp;display=swap" rel="stylesheet">
    <link phx-track-static rel="stylesheet" href="css/app-02e14b945d8b05cb2897c7e476f6f184%EF%B9%96vsn=d.css"/>
    <script defer phx-track-static type="text/javascript" src="js/app-a031d7efdf9d092a14f7e85a21871ce8%EF%B9%96vsn=d.js"></script>
    <!-- SIDENAV SCRIPT -->
    <script type="text/javascript">
      /* Set the width of the side navigation to 250px */
      function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
        document.getElementById("main").style.marginLeft = "250px";
        document.body.style.backgroundColor = "rgba(0,0,0,0.4)";

        var dropdown = document.getElementsByClassName("dropdown-btn");
        var i;
        for (i = 0; i < dropdown.length; i++) {
          dropdown[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var dropdownContent = this.nextElementSibling;
            if (dropdownContent.style.display === "block") {
              dropdownContent.style.display = "none";
            } else {
              dropdownContent.style.display = "block";
            }
          });
        }
      }

      /* Set the width of the side navigation to 0 */
      function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
        document.getElementById("main").style.marginLeft = "0";
        document.body.style.backgroundColor = "white";
      }
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2976969447542443"
     crossorigin="anonymous"></script>
    <ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-2976969447542443"
     data-ad-slot="2745114693">
    </ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </head>
  <body>

    <div id="mySidenav" class="sidenav">
      <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
      <!-- FOR WHEN YOU NEED NESTED NAV USE THIS EXAMPLE -->
      <!-- <p class="dropdown-btn">Elixir Phoenix</p>
      <div class="dropdown-container">
        <a href="#">Link 1</a>
        <a href="#">Link 2</a>
      </div> -->
      <a href="page/about.html">About</a>
      <a href="page/attributions.html">Attributions</a>
    </div>

    <nav id="nav">
      <a href="index.html"><img id="logo" class="logo" src="images/logo-7c9e547c805c708decc674b648163720%EF%B9%96vsn=d.svg" alt="DevDecks icon" /></a>
      <a href="studio.html"><img id="settings-icon" class="nav-icon lg" src="images/studio-2-00b6814e1495c4cb9ff6987d9b98753f%EF%B9%96vsn=d.svg" alt="studio icon" /></a>
      <a id="darkmode-toggler"><img id="settings-icon" class="nav-icon" src="images/night-mode-41cf0bc8abaacbbd59e2fdca8ac55a85%EF%B9%96vsn=d.svg" alt="dark mode icon" /></a>
      <img id="settings-icon" onclick="openNav()" class="nav-icon" src="images/more-79c5db1b1206b6b8195fee1ceb385178%EF%B9%96vsn=d.svg" alt="more pages icon" />
    </nav>
    <br />
<main role="main" class="container">
  <p class="alert alert-info" role="alert"></p>
  <p class="alert alert-danger" role="alert"></p>
<div class="page blog-post">
  <div id="2021-Guarav-Sen-API-Design-notes" style="margin-bottom: 3rem;">
<a class="all-posts-link" href="index.html">All posts</a>
    <div class="flex-row-d-column-m">
      <h1 class="link-title">Guarav Sen - API Design Notes</h1>
      <time>2021-04-02</time>
    </div>

    <div class="flex-row-no-space">
      <img class="icon-sm" src="images/tag2-730d3eac769a667d071582853b151791%EF%B9%96vsn=d.svg" />&nbsp<a class="blog-tag" href="tags/system-design.html">system-design</a><a class="blog-tag" href="tags/api.html">api</a>
    </div>

    <div class="blog-post-body">
<p>
*These notes are not intended to be a summary of the tutorial, for deeper understanding of what I‚Äôve written watch the tutorial linked below.</p>
<p>
<a href="https://www.youtube.com/watch?v=_YlYuNMTCc8" target="_blank">Tutorial link</a></p>
<h2>
  Documentation</h2>
<ul>
  <li>
API documentation should show clients/consumers how to use your service, not how your code works.  </li>
  <li>
Documentation list: Define function/endpoint, define parameters, define possible errors.  </li>
</ul>
<h2>
  Errors</h2>
<ul>
  <li>
Caution: sometimes API‚Äôs return a generic error for anything that goes wrong when calling their system. This is not a good practice but is worth knowing about as an API consumer.  </li>
  <li>
Caution: sometimes an API dev will build in too much error handling. This is also not recommended and can make an API overly complex for maintainers.  </li>
  <li>
Idea: when handling errors ask yourself if the client/consumer should be able to decipher this without your system telling them explicitly. An example might be the client passes in an integer to your API instead of a string, a client could figure that out instead of you adding additional code.  </li>
</ul>
<h2>
  Side Effects</h2>
<ul>
  <li>
A function/endpoint shouldn‚Äôt do more than the name suggests, ex <code class="inline">setAdmins</code> should only set admins. If it needs to do more than just set the admins, like create a group, then either name it properly to <code class="inline">setAdminsAndGroups</code>. Or see if they can be broken into separate calls where first you create a group and then set the group as admins.  </li>
</ul>
<h2>
  API Design Decision Scenario</h2>
<ul>
  <li>
If an a client asks for new functionality to check that a resource collection on the client side is the same as the resource collection on the server, there are a few options  </li>
</ul>
<ol>
  <li>
Accept a new parameter to an existing method that takes in the collection as a parameter that the client passes to your service.  </li>
  <li>
An a new method that get‚Äôs the collection based on some identifier. The downside here is more HTTP/IO requests.  </li>
  <li>
Add a new method to that accepts the collection as a parameter. *This seems like the best option.  </li>
</ol>
<h2>
  Large Responses</h2>
<ul>
  <li>
Do not make an API response too large in hopes you will not need to make many changes to it later. It‚Äôs confusing to the consumer deciphering your API and heavy on the network.  </li>
  <li>
If an API is requesting all records of a particular resource, break down using either pagination or fragmentation.  </li>
</ul>
<h2>
  Data Consistency</h2>
<ul>
  <li>
Scenario: one user makes a query for a list of records while another user is posting to that list of records at the same time, you need to decide if that matters for your system or not. If it does matter than the various calls to your API will be less efficient.  </li>
  <li>
If you cache resources you need to decide when/if that cache should expire based on new resources added. You may want to cache records if your DB load is heavy.  </li>
</ul>
<h2>
  Other Notes</h2>
<ul>
  <li>
Return an object instead of a list of objects as a response. This makes that API more extensible if additional data needs to be added later on. Instead of needing to update the list of objects, you can add a new key.  </li>
  <li>
Web API URLs can take the format of: myapi.com/model/function/v1 and when the function needs to change, you can publish a v2.  </li>
</ul>

    </div>
  </div>
</div>

</main>

    <div id="privacy-policy-container">
      <a href="page/privacy.html">Privacy Policy</a>
      <div>Built with üõ†Ô∏è and ‚òï in ‚õ∞Ô∏è</div>
    </div>

  </body>
</html>
