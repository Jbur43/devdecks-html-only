<!DOCTYPE html>
<html lang="en">
  <head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2976969447542443"
     crossorigin="anonymous"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-2F7W0VSKYS"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-2F7W0VSKYS');
    </script>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta charset="UTF-8" content="Ew8DBGR1UhocIyE1OwUtOhEuC0EBHRRWKaf3RG6OSkFbOOfmgML3EGPb" csrf-param="_csrf_token" method-param="_method" name="csrf-token">
<meta content="phoenix, seo" name="keywords"><meta content="How to add nofollow to pages in a Phoenix application" name="description">
<title>Add nofollow to pages in a Phoenix application</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100;200;300;400;500;600&amp;display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100;200;300;400;500;600&amp;display=swap" rel="stylesheet">
    <link phx-track-static rel="stylesheet" href="css/app-02e14b945d8b05cb2897c7e476f6f184%EF%B9%96vsn=d.css"/>
    <script defer phx-track-static type="text/javascript" src="js/app-a031d7efdf9d092a14f7e85a21871ce8%EF%B9%96vsn=d.js"></script>
    <!-- SIDENAV SCRIPT -->
    <script type="text/javascript">
      /* Set the width of the side navigation to 250px */
      function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
        document.getElementById("main").style.marginLeft = "250px";
        document.body.style.backgroundColor = "rgba(0,0,0,0.4)";

        var dropdown = document.getElementsByClassName("dropdown-btn");
        var i;
        for (i = 0; i < dropdown.length; i++) {
          dropdown[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var dropdownContent = this.nextElementSibling;
            if (dropdownContent.style.display === "block") {
              dropdownContent.style.display = "none";
            } else {
              dropdownContent.style.display = "block";
            }
          });
        }
      }

      /* Set the width of the side navigation to 0 */
      function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
        document.getElementById("main").style.marginLeft = "0";
        document.body.style.backgroundColor = "white";
      }
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2976969447542443"
     crossorigin="anonymous"></script>
    <ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-2976969447542443"
     data-ad-slot="2745114693">
    </ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </head>
  <body>

    <div id="mySidenav" class="sidenav">
      <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
      <!-- FOR WHEN YOU NEED NESTED NAV USE THIS EXAMPLE -->
      <!-- <p class="dropdown-btn">Elixir Phoenix</p>
      <div class="dropdown-container">
        <a href="#">Link 1</a>
        <a href="#">Link 2</a>
      </div> -->
      <a href="page/about.html">About</a>
      <a href="page/attributions.html">Attributions</a>
    </div>

    <nav id="nav">
      <a href="index.html"><img id="logo" class="logo" src="images/logo-7c9e547c805c708decc674b648163720%EF%B9%96vsn=d.svg" alt="DevDecks icon" /></a>
      <a href="studio.html"><img id="settings-icon" class="nav-icon lg" src="images/studio-2-00b6814e1495c4cb9ff6987d9b98753f%EF%B9%96vsn=d.svg" alt="studio icon" /></a>
      <a id="darkmode-toggler"><img id="settings-icon" class="nav-icon" src="images/night-mode-41cf0bc8abaacbbd59e2fdca8ac55a85%EF%B9%96vsn=d.svg" alt="dark mode icon" /></a>
      <img id="settings-icon" onclick="openNav()" class="nav-icon" src="images/more-79c5db1b1206b6b8195fee1ceb385178%EF%B9%96vsn=d.svg" alt="more pages icon" />
    </nav>
    <br />
<main role="main" class="container">
  <p class="alert alert-info" role="alert"></p>
  <p class="alert alert-danger" role="alert"></p>
<div class="page blog-post">
  <div id="2022-add-nofollow-to-page-in-phoenix-application" style="margin-bottom: 3rem;">
<a class="all-posts-link" href="index.html">All posts</a>
    <div class="flex-row-d-column-m">
      <h1 class="link-title">Add nofollow to pages in a Phoenix application</h1>
      <time>2022-04-01</time>
    </div>

    <div class="flex-row-no-space">
      <img class="icon-sm" src="images/tag2-730d3eac769a667d071582853b151791%EF%B9%96vsn=d.svg" />&nbsp<a class="blog-tag" href="tags/phoenix.html">phoenix</a><a class="blog-tag" href="tags/seo.html">seo</a>
    </div>

    <div class="blog-post-body">
<p>
In a <a href="2020-seo-in-elixir.html" target="_blank">previous post</a> I outlined how you can add meta tags to a template in a phoenix application to help with SEO. In this post I will review the functionality that’s needed to accomplish setting <code class="inline">&lt;meta&gt;</code> tags in the <code class="inline">&lt;head&gt;</code> of your html document. The tags will be used to tell Google and most other search engines that this page should not be included in their index.</p>
<p>
<code class="inline">&lt;meta&gt;</code> tags are usually used to communicate with an outside service regarding something you’d like them to know, in the SEO example you want a search engine to understand more information about the content of the page. For this example we want search engines to know that we don’t want this page to be included in their index.</p>
<p>
To add meta tags to templates in your html documents first we will create functions in your Phoenix LayoutView that can be invoked by any other template in your application. By adding the functions here we can optionally choose to call them within any other template we create, so we don’t have to have the tags on every page, just the ones that need it.</p>
<p>
That code looks like:</p>
<pre><code class="makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">DevDecksWeb.LayoutView</span><span class="w"> </span><span class="k" data-group-id="0214207133-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">DevDecksWeb</span><span class="p">,</span><span class="w"> </span><span class="ss">:view</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">meta_tags</span><span class="p" data-group-id="0214207133-2">(</span><span class="n">attrs_list</span><span class="p" data-group-id="0214207133-2">)</span><span class="w"> </span><span class="k" data-group-id="0214207133-3">do</span><span class="w">
    </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p" data-group-id="0214207133-4">(</span><span class="n">attrs_list</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">meta_tag</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="0214207133-4">)</span><span class="w">
  </span><span class="k" data-group-id="0214207133-3">end</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">meta_tag</span><span class="p" data-group-id="0214207133-5">(</span><span class="n">attrs</span><span class="p" data-group-id="0214207133-5">)</span><span class="w"> </span><span class="k" data-group-id="0214207133-6">do</span><span class="w">
    </span><span class="n">tag</span><span class="p" data-group-id="0214207133-7">(</span><span class="ss">:meta</span><span class="p">,</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">into</span><span class="p" data-group-id="0214207133-8">(</span><span class="n">attrs</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0214207133-9">[</span><span class="p" data-group-id="0214207133-9">]</span><span class="p" data-group-id="0214207133-8">)</span><span class="p" data-group-id="0214207133-7">)</span><span class="w">
  </span><span class="k" data-group-id="0214207133-6">end</span><span class="w">
</span><span class="k" data-group-id="0214207133-1">end</span></code></pre>
<p>
In the root layout file (root.html.leex) call the <code class="inline">meta_tags</code> function if <code class="inline">meta_tags</code> are provided to <code class="inline">assigns</code>. Call <code class="inline">assigns[:meta_attrs]</code> directly here instead of <code class="inline">@meta_attrs</code> so that if <code class="inline">@meta_attrs</code> is not provided the application does not error and stop execution.</p>
<pre><code class="makeup elixir"><span class="o">&lt;</span><span class="p">%</span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">assigns</span><span class="p" data-group-id="2630102610-1">[</span><span class="ss">:meta_attrs</span><span class="p" data-group-id="2630102610-1">]</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">meta_tags</span><span class="p" data-group-id="2630102610-2">(</span><span class="n">assigns</span><span class="p" data-group-id="2630102610-3">[</span><span class="ss">:meta_attrs</span><span class="p" data-group-id="2630102610-3">]</span><span class="p" data-group-id="2630102610-2">)</span><span class="w"> </span><span class="p">%</span><span class="o">&gt;</span></code></pre>
<p>
If you’re using a LiveView template add the <code class="inline">meta_tags</code> to <code class="inline">assigns</code> in mount like the below:</p>
<pre><code class="makeup elixir"><span class="kd">def</span><span class="w"> </span><span class="nf">mount</span><span class="p" data-group-id="9148586798-1">(</span><span class="c">_params</span><span class="p">,</span><span class="w"> </span><span class="c">_session</span><span class="p">,</span><span class="w"> </span><span class="n">socket</span><span class="p" data-group-id="9148586798-1">)</span><span class="w"> </span><span class="k" data-group-id="9148586798-2">do</span><span class="w">
    </span><span class="n">meta_attrs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9148586798-3">[</span><span class="w">
      </span><span class="p" data-group-id="9148586798-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;robots&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">content</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;noindex&quot;</span><span class="p" data-group-id="9148586798-4">}</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="9148586798-5">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;googlebot&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">content</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;noindex&quot;</span><span class="p" data-group-id="9148586798-5">}</span><span class="w">
    </span><span class="p" data-group-id="9148586798-3">]</span><span class="w">

  </span><span class="p" data-group-id="9148586798-6">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">assign</span><span class="p" data-group-id="9148586798-7">(</span><span class="n">socket</span><span class="p">,</span><span class="w"> </span><span class="ss">meta_attrs</span><span class="p">:</span><span class="w"> </span><span class="n">meta_attrs</span><span class="p" data-group-id="9148586798-7">)</span><span class="p" data-group-id="9148586798-6">}</span><span class="w">
</span><span class="k" data-group-id="9148586798-2">end</span></code></pre>
<p>
If you’re using an MVC approach you can add the <code class="inline">meta_attrs</code> to your controller that is generating the template:</p>
<pre><code class="makeup elixir"><span class="kd">def</span><span class="w"> </span><span class="nf">index</span><span class="p" data-group-id="0055807068-1">(</span><span class="n">conn</span><span class="p">,</span><span class="w"> </span><span class="c">_params</span><span class="p" data-group-id="0055807068-1">)</span><span class="w"> </span><span class="k" data-group-id="0055807068-2">do</span><span class="w">
  </span><span class="n">meta_attrs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="0055807068-3">[</span><span class="w">
    </span><span class="p" data-group-id="0055807068-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;robots&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">content</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;noindex&quot;</span><span class="p" data-group-id="0055807068-4">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="0055807068-5">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;googlebot&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">content</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;noindex&quot;</span><span class="p" data-group-id="0055807068-5">}</span><span class="w">
  </span><span class="p" data-group-id="0055807068-3">]</span><span class="w">

  </span><span class="n">render</span><span class="p" data-group-id="0055807068-6">(</span><span class="n">conn</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;index.html&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">meta_attrs</span><span class="p">:</span><span class="w"> </span><span class="n">meta_attrs</span><span class="p" data-group-id="0055807068-6">)</span><span class="w">
</span><span class="k" data-group-id="0055807068-2">end</span></code></pre>
<p>
The meta tags shown in this example are directions from <a href="https://developers.google.com/search/docs/advanced/crawling/block-indexing" target="_blank">Google’s documentation</a>. It should be noted that these tags should prevent <em>most</em> web crawlers from indexing your page, but it’s possible that other crawlers handle indexing differently.</p>
<p>
Further reading:</p>
<ul>
  <li>
<a href="2022-rendering-liveview-template-outside-of-router.html" target="_blank">Rendering a LiveView template outside of router</a>  </li>
  <li>
<a href="2022-in-memory-pagination-by-example.html" target="_blank">How to paginate an in memory array</a>  </li>
</ul>

    </div>
  </div>
</div>

</main>

    <div id="privacy-policy-container">
      <a href="page/privacy.html">Privacy Policy</a>
      <div>Built with 🛠️ and ☕ in ⛰️</div>
    </div>

  </body>
</html>
