<!DOCTYPE html>
<html lang="en">
  <head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2976969447542443"
     crossorigin="anonymous"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-2F7W0VSKYS"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-2F7W0VSKYS');
    </script>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta charset="UTF-8" content="BA0_Hn8IKBEZATZ-P0wIFG1COWYCKwsjstpv9IbpXFCGI5Bl8qNRGYNq" csrf-param="_csrf_token" method-param="_method" name="csrf-token">
<meta content="rails, turbo" name="keywords"><meta content="How to render a collection of turbo frames" name="description">
<title>How to render a collection of turbo frames</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100;200;300;400;500;600&amp;display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100;200;300;400;500;600&amp;display=swap" rel="stylesheet">
    <link phx-track-static rel="stylesheet" href="css/app-02e14b945d8b05cb2897c7e476f6f184%EF%B9%96vsn=d.css"/>
    <script defer phx-track-static type="text/javascript" src="js/app-a031d7efdf9d092a14f7e85a21871ce8%EF%B9%96vsn=d.js"></script>
    <!-- SIDENAV SCRIPT -->
    <script type="text/javascript">
      /* Set the width of the side navigation to 250px */
      function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
        document.getElementById("main").style.marginLeft = "250px";
        document.body.style.backgroundColor = "rgba(0,0,0,0.4)";

        var dropdown = document.getElementsByClassName("dropdown-btn");
        var i;
        for (i = 0; i < dropdown.length; i++) {
          dropdown[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var dropdownContent = this.nextElementSibling;
            if (dropdownContent.style.display === "block") {
              dropdownContent.style.display = "none";
            } else {
              dropdownContent.style.display = "block";
            }
          });
        }
      }

      /* Set the width of the side navigation to 0 */
      function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
        document.getElementById("main").style.marginLeft = "0";
        document.body.style.backgroundColor = "white";
      }
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2976969447542443"
     crossorigin="anonymous"></script>
    <ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-2976969447542443"
     data-ad-slot="2745114693">
    </ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </head>
  <body>

    <div id="mySidenav" class="sidenav">
      <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
      <!-- FOR WHEN YOU NEED NESTED NAV USE THIS EXAMPLE -->
      <!-- <p class="dropdown-btn">Elixir Phoenix</p>
      <div class="dropdown-container">
        <a href="#">Link 1</a>
        <a href="#">Link 2</a>
      </div> -->
      <a href="page/about.html">About</a>
      <a href="page/attributions.html">Attributions</a>
    </div>

    <nav id="nav">
      <a href="index.html"><img id="logo" class="logo" src="images/logo-7c9e547c805c708decc674b648163720%EF%B9%96vsn=d.svg" alt="DevDecks icon" /></a>
      <a href="studio.html"><img id="settings-icon" class="nav-icon lg" src="images/studio-2-00b6814e1495c4cb9ff6987d9b98753f%EF%B9%96vsn=d.svg" alt="studio icon" /></a>
      <a id="darkmode-toggler"><img id="settings-icon" class="nav-icon" src="images/night-mode-41cf0bc8abaacbbd59e2fdca8ac55a85%EF%B9%96vsn=d.svg" alt="dark mode icon" /></a>
      <img id="settings-icon" onclick="openNav()" class="nav-icon" src="images/more-79c5db1b1206b6b8195fee1ceb385178%EF%B9%96vsn=d.svg" alt="more pages icon" />
    </nav>
    <br />
<main role="main" class="container">
  <p class="alert alert-info" role="alert"></p>
  <p class="alert alert-danger" role="alert"></p>
<div class="page blog-post">
  <div id="2022-rendering-a-collection-of-turbo-frames" style="margin-bottom: 3rem;">
<a class="all-posts-link" href="index.html">All posts</a>
    <div class="flex-row-d-column-m">
      <h1 class="link-title">How to render a collection of turbo frames</h1>
      <time>2022-04-09</time>
    </div>

    <div class="flex-row-no-space">
      <img class="icon-sm" src="images/tag2-730d3eac769a667d071582853b151791%EF%B9%96vsn=d.svg" />&nbsp<a class="blog-tag" href="tags/rails.html">rails</a><a class="blog-tag" href="tags/turbo.html">turbo</a>
    </div>

    <div class="blog-post-body">
<p>
This is a code example of how to render a collection of Turbo Frames for inline editing within each frame. This is going to be a continuation from a previous post on <a href="2022-rendering-a-turbo-frame-inside-a-form.html" taget="_blank">redering Turbo Frames within a form</a>. </p>
<p>
Turbo Frames work by first rendering the html content within the frame and then if you click an internal link within a turbo frame it will make a network request to get new html that will replace the current contents of the frame. For this to happen a Turbo Frame with the same Turbo Frame ID needs to exist on both sides of the frame, later in this example that will see that as <code class="inline">name_frame_id</code>.</p>
<p>
To handle this we will need to add an index action to the <code class="inline">OrdersController</code> that retrieves the orders collection from the database and an <code class="inline">edit_from_step</code> action to get the html contents of the other side of the Turbo Frame.</p>
<p>
orders_controller.rb</p>
<pre><code class="ruby">class OrdersController &lt; ApplicationController
  def index
    @orders = Order.all
  end

  def edit_from_step
    @order = @order
    @step = params[:step_id]

    render :edit
  end
end</code></pre>
<p>
And then in the html template we will iterate over the list of orders and render a Turbo Frame partial for each order. In the partial there is a link to the <code class="inline">edit_from_step</code> path, which when clicked will execute an async request to get the html returned from that request and replace our current from contents with the new frame contents. So in this example the contents of the frame in <code class="inline">_order.html.erb</code> will be replaced with matching turbo frame contents of <code class="inline">_step_(step_id).html.erb</code>. </p>
<p>
In this example the html at <code class="inline">_step_(step_id).html.erb</code> contains a form within the frame to edit the contents previously displayed by the frame before clicking the link, which can be used for inline editing.</p>
<p>
index.html.erb</p>
<pre><code class="ruby">&lt;div id=&quot;orders&quot;&gt;
  &lt;% @orders.each_with_index do |order, index| %&gt;
    &lt;%= render partial: &quot;order&quot;, locals: { index: index, order: order }  %&gt;
  &lt;% end %&gt;
&lt;/div&gt;</code></pre>
<p>
_order.html.erb</p>
<pre><code class="ruby">&lt;% name_frame_id = dom_id(order, &quot;name&quot;) %&gt;
&lt;%= turbo_frame_tag name_frame_id, data: { turbo_frame: name_frame_id } do %&gt;
  &lt;h3&gt;NAME&lt;/h3&gt;
  &lt;div&gt;&lt;%= order.name %&gt;&lt;/div&gt;
  &lt;%= link_to &quot;Edit Name&quot;, edit_from_step_path(order, 1) %&gt;
  &lt;br/&gt;
&lt;% end %&gt;

&lt;% toppings_frame_id = dom_id(order, &quot;toppings&quot;) %&gt;
&lt;%= turbo_frame_tag toppings_frame_id, data: { turbo_frame: toppings_frame_id } do %&gt;
  &lt;h3&gt;TOPPINGS&lt;/h3&gt;
  &lt;% order.toppings.each do |topping| %&gt;
    &lt;p&gt;&lt;%= topping %&gt;&lt;/p&gt;
  &lt;% end %&gt;
  &lt;%= link_to &quot;Edit Toppings&quot;, edit_from_step_path(order, 2) %&gt;
  &lt;br /&gt;
&lt;% end %&gt;</code></pre>
<p>
edit.html.erb</p>
<pre><code class="ruby">&lt;%= render partial: &quot;orders/separate_form_partials/_step_#{@step ? @step : order.step}&quot;, locals: { order: @order } %&gt;</code></pre>
<p>
orders/separate_form_partials/_step_1.html.erb</p>
<pre><code class="ruby">&lt;h1&gt;Name&lt;/h1&gt;
&lt;% name_frame_id = dom_id(order, &quot;name&quot;) %&gt;
&lt;%= turbo_frame_tag name_frame_id, data: { turbo_frame: name_frame_id } do %&gt;
  &lt;%= form_with(model: order) do |form| %&gt;
    &lt;% if order.errors.any? %&gt;
      &lt;div style=&quot;color: red&quot;&gt;
        &lt;h2&gt;&lt;%= pluralize(order.errors.count, &quot;error&quot;) %&gt; prohibited this order from being saved:&lt;/h2&gt;

        &lt;ul&gt;
          &lt;% order.errors.each do |error| %&gt;
            &lt;li&gt;&lt;%= error.full_message %&gt;&lt;/li&gt;
          &lt;% end %&gt;
        &lt;/ul&gt;
      &lt;/div&gt;
    &lt;% end %&gt;

    &lt;%= form.text_field :name %&gt;
    &lt;%= form.submit &quot;Continue Order&quot; %&gt;
  &lt;% end %&gt;
&lt;% end %&gt;</code></pre>
<p>
Further reading:</p>
<ul>
  <li>
<a href="2022-system-auth-in-software-engineering.html" target="_blank">Handling system authentication in software engineering</a>  </li>
  <li>
<a href="2022-how-to-read-ruby-open-source-code-locally.html" target="_blank">How to read Ruby open source code locally</a>  </li>
</ul>

    </div>
  </div>
</div>

</main>

    <div id="privacy-policy-container">
      <a href="page/privacy.html">Privacy Policy</a>
      <div>Built with üõ†Ô∏è and ‚òï in ‚õ∞Ô∏è</div>
    </div>

  </body>
</html>
